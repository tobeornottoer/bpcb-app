import{d as N,r as y,m as U,Q as M,s as p,e as V,y as B,x as a,g as d,v as s,B as h,f as A,i as F,F as I,b as L,n as X,a8 as J,q as W,p as z,k as H,aD as K,X as Q,t as v,W as G,E as Y,_ as Z}from"./index-61481958.js";import{r as ee,b as le,a as se,e as te,c as ae,d as oe}from"./address-6fe9af1a.js";const de={class:"dialog-footer"},ne=N({__name:"addressDialog",emits:["handleSubmit"],setup(b,{expose:C,emit:q}){const c=y(!1),g=y(),l=U({type:"individuality",first_name:"",last_name:"",country:"",city:"",street:"",postal:"",tel_phone:"",division:"",specific_address:"",duty:""}),T=U({type:[{required:!0,message:"This field is required"}],first_name:[{required:!0,message:"This field is required"}],last_name:[{required:!0,message:"This field is required"}],country:[{required:!0,message:"This field is required"}],division:[{required:!0,message:"This field is required"}],city:[{required:!0,message:"This field is required"}],street:[{required:!0,message:"This field is required"}],postal:[{required:!0,message:"This field is required"}],tel_phone:[{required:!0,message:"This field is required"}]});M(()=>c.value,i=>{var e;i||(o.value=void 0,(e=g.value)==null||e.resetFields())});const k=y([]),o=y();C({open:async i=>{const e=await ee();k.value=e.code===200?e.data||[]:[],c.value=!0,i!=null&&i.id&&(o.value=i.id,X(()=>{for(let m of Object.keys(l))Object.assign(l,{[m]:i[m]})}))},close:()=>{c.value=!1}});const n=async()=>{var e;await((e=g.value)==null?void 0:e.validate().catch(()=>{}))&&(q("handleSubmit",JSON.parse(JSON.stringify(l)),o.value),c.value=!1)},x=J(async(i,e)=>{const{country:m}=l;if(m){const w=await le({search:i||"",country:m});e((w==null?void 0:w.data)||[])}else e([])}),E=i=>{};return(i,e)=>{const m=p("el-radio"),w=p("el-radio-group"),u=p("el-form-item"),_=p("el-input"),O=p("el-option"),P=p("el-select"),R=p("el-autocomplete"),$=p("el-form"),D=p("el-button"),j=p("el-dialog");return V(),B(j,{modelValue:c.value,"onUpdate:modelValue":e[12]||(e[12]=t=>c.value=t),title:"Edit address",width:"840px",class:"address-dialog",draggable:""},{footer:a(()=>[d("span",de,[s(D,{onClick:e[11]||(e[11]=t=>c.value=!1)},{default:a(()=>[h("Cancel")]),_:1}),s(D,{type:"primary",onClick:n},{default:a(()=>[h(" Confirm ")]),_:1})])]),default:a(()=>[s($,{model:l,rules:T,ref_key:"dialogForm",ref:g,"label-width":"146px",inline:!0},{default:a(()=>[s(u,{prop:"type"},{default:a(()=>[s(w,{modelValue:l.type,"onUpdate:modelValue":e[0]||(e[0]=t=>l.type=t),class:"large-radio"},{default:a(()=>[s(m,{label:"enterprise",border:!0},{default:a(()=>[h("Company")]),_:1}),s(m,{label:"individuality",border:!0},{default:a(()=>[h("Individual Customer")]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(u,{prop:"first_name",label:"First Name"},{default:a(()=>[s(_,{class:"input-wrap",placeholder:"First Name",modelValue:l.first_name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.first_name=t)},null,8,["modelValue"])]),_:1}),s(u,{prop:"last_name",label:"Last Name"},{default:a(()=>[s(_,{class:"input-wrap",placeholder:"Last Name",modelValue:l.last_name,"onUpdate:modelValue":e[2]||(e[2]=t=>l.last_name=t)},null,8,["modelValue"])]),_:1}),s(u,{prop:"country",label:"Country/Region"},{default:a(()=>[s(P,{modelValue:l.country,"onUpdate:modelValue":e[3]||(e[3]=t=>l.country=t),placeholder:"Country/Region",filterable:""},{default:a(()=>[(V(!0),A(I,null,F(k.value,t=>(V(),B(O,{value:t.en_name,label:t.en_name,key:t.en_name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(u,{prop:"division",label:"State/Province/Region"},{default:a(()=>[s(R,{class:"input-wrap",modelValue:l.division,"onUpdate:modelValue":e[4]||(e[4]=t=>l.division=t),"fetch-suggestions":L(x),placeholder:"State/Province/Region","value-key":"en_name",onSelect:E},null,8,["modelValue","fetch-suggestions"])]),_:1}),s(u,{prop:"city",label:"City"},{default:a(()=>[s(_,{class:"input-wrap",placeholder:"City",modelValue:l.city,"onUpdate:modelValue":e[5]||(e[5]=t=>l.city=t)},null,8,["modelValue"])]),_:1}),s(u,{prop:"street",label:"Street Address"},{default:a(()=>[s(_,{class:"input-wrap",placeholder:"Street Address",modelValue:l.street,"onUpdate:modelValue":e[6]||(e[6]=t=>l.street=t)},null,8,["modelValue"])]),_:1}),s(u,{prop:"specific_address",label:"Optional"},{default:a(()=>[s(_,{class:"detail-address",placeholder:"Apartment, suite, unit, building, floor, etc.(optional)",modelValue:l.specific_address,"onUpdate:modelValue":e[7]||(e[7]=t=>l.specific_address=t)},null,8,["modelValue"])]),_:1}),s(u,{prop:"postal",label:"Postal Code"},{default:a(()=>[s(_,{class:"input-wrap",placeholder:"Postal Code",modelValue:l.postal,"onUpdate:modelValue":e[8]||(e[8]=t=>l.postal=t)},null,8,["modelValue"])]),_:1}),s(u,{prop:"tel_phone",label:"Telephone"},{default:a(()=>[s(_,{class:"input-wrap",placeholder:"Telephone",modelValue:l.tel_phone,"onUpdate:modelValue":e[9]||(e[9]=t=>l.tel_phone=t)},null,8,["modelValue"])]),_:1}),s(u,{prop:"duty",label:"VAT/TAX number"},{default:a(()=>[s(_,{class:"input-wrap",placeholder:"VAT/TAX number",modelValue:l.duty,"onUpdate:modelValue":e[10]||(e[10]=t=>l.duty=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}});const S=b=>(z("data-v-5f0327eb"),b=b(),H(),b),ie={class:"profile-address-wrap"},re=S(()=>d("div",{class:"h1"},[h(" Delivery AddressPlease"),d("span",null,"enter your new contact/address")],-1)),ue={class:"tip"},pe={class:"addr-wrap"},ce={class:"name"},me={class:"detail"},_e={class:"street"},fe={class:"opr"},ve=["onClick"],ye=["onClick"],ge=S(()=>d("div",{class:"add-icon"},null,-1)),he=S(()=>d("div",{class:"add-text"},"Add a new address",-1)),Ve=[ge,he],be=N({__name:"address",setup(b){const C=y(),q=o=>{var r;(r=C.value)==null||r.open(o)},c=async(o,r)=>{r?await te(r,o):await ae(o),T()},g=y(),l=y(),T=async()=>{var r,f;const o=await se();o.code===200&&(l.value=o.data,g.value=(f=(r=o.data)==null?void 0:r[0])==null?void 0:f.id)},k=o=>{G.confirm("The address will be deleted. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{(await oe(o)).code===200&&(l.value=l.value.filter(f=>f.id!==o),Y({type:"success",message:"Delete completed"}))})};return W(()=>{T()}),(o,r)=>{const f=p("el-icon");return V(),A("div",ie,[re,d("div",ue,[s(f,null,{default:a(()=>[s(L(K))]),_:1}),h(` Updating address info here doesn't apply to the already generated orders (including the "Uncompleted Payment" order), please contact your sales rep to update the address info. `)]),d("div",pe,[(V(!0),A(I,null,F(l.value,n=>(V(),A("div",{class:Q(["addr-container poster",{selected:n.id===g.value}]),key:n.id},[d("div",ce,v(n.first_name)+" "+v(n.last_name),1),d("div",me,[d("div",_e,v(n.street),1),d("div",null,v(n.city)+", "+v(n.postal)+", "+v(n.country)+" ",1),d("div",null,v(n.tel_phone),1)]),d("div",fe,[d("div",{onClick:x=>q(n)},"Edit",8,ve),d("div",{onClick:x=>k(n.id)},"Delete",8,ye)])],2))),128)),d("div",{class:"addr-container add-addr",onClick:q},Ve)]),s(ne,{ref_key:"addressDialogRef",ref:C,onHandleSubmit:c},null,512)])}}});const qe=Z(be,[["__scopeId","data-v-5f0327eb"]]);export{qe as default};
