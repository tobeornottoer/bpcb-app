import{i as P}from"./index-ced1bd49.js";import{r as $,b as j,a as M,e as z,c as H,d as J}from"./address-ceff7901.js";import{d as I,r as h,s as B,t as X,j as m,e as q,m as K,p as a,g as o,k as t,l as g,b as x,n as W,N as F,L as G,f as k,F as Q,z as Y,R as Z,S as ee,B as se,A as y,E as te,H as le,_ as ae}from"./index-02b6e309.js";const oe={class:"dialog-footer"},de=I({__name:"addressDialog",emits:["handleSubmit"],setup(V,{expose:C,emit:S}){const c=h(!1),v=h(),s=B({type:"individuality",first_name:"",last_name:"",country:"",city:"",street:"",postal:"",tel_phone:"",division:"",specific_address:"",duty:""}),A=B({type:[{required:!0,message:"This field is required"}],first_name:[{required:!0,message:"This field is required"}],last_name:[{required:!0,message:"This field is required"}],country:[{required:!0,message:"This field is required"}],division:[{required:!0,message:"This field is required"}],city:[{required:!0,message:"This field is required"}],street:[{required:!0,message:"This field is required"}],postal:[{required:!0,message:"This field is required"}],tel_phone:[{required:!0,message:"This field is required"}]});X(()=>c.value,d=>{var e;d||(b.value=void 0,(e=v.value)==null||e.resetFields())});const b=h();C({open:async d=>{c.value=!0,d!=null&&d.id&&(b.value=d.id,W(()=>{for(let e of Object.keys(s))Object.assign(s,{[e]:d[e]})}))},close:()=>{c.value=!1}});const _=async()=>{var e;await((e=v.value)==null?void 0:e.validate().catch(()=>{}))&&(S("handleSubmit",JSON.parse(JSON.stringify(s)),b.value),c.value=!1)},i=F(async(d,e)=>{const p=await $({search:d||""});e((p==null?void 0:p.data)||[])}),T=d=>{},L=F(async(d,e)=>{const{country:p}=s;if(p){const w=await j({search:d||"",country:p});e((w==null?void 0:w.data)||[])}else e([])}),R=d=>{};return(d,e)=>{const p=m("el-radio"),w=m("el-radio-group"),u=m("el-form-item"),f=m("el-input"),D=m("el-autocomplete"),E=m("el-form"),N=m("el-button"),O=m("el-dialog");return q(),K(O,{modelValue:c.value,"onUpdate:modelValue":e[12]||(e[12]=l=>c.value=l),title:"Edit address",width:"840px",class:"address-dialog",draggable:""},{footer:a(()=>[o("span",oe,[t(N,{onClick:e[11]||(e[11]=l=>c.value=!1)},{default:a(()=>[g("Cancel")]),_:1}),t(N,{type:"primary",onClick:_},{default:a(()=>[g(" Confirm ")]),_:1})])]),default:a(()=>[t(E,{model:s,rules:A,ref_key:"dialogForm",ref:v,"label-width":"146px",inline:!0},{default:a(()=>[t(u,{prop:"type"},{default:a(()=>[t(w,{modelValue:s.type,"onUpdate:modelValue":e[0]||(e[0]=l=>s.type=l),class:"large-radio"},{default:a(()=>[t(p,{label:"enterprise",border:!0},{default:a(()=>[g("Company")]),_:1}),t(p,{label:"individuality",border:!0},{default:a(()=>[g("Individual Customer")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{prop:"first_name",label:"First Name"},{default:a(()=>[t(f,{class:"input-wrap",placeholder:"First Name",modelValue:s.first_name,"onUpdate:modelValue":e[1]||(e[1]=l=>s.first_name=l)},null,8,["modelValue"])]),_:1}),t(u,{prop:"last_name",label:"Last Name"},{default:a(()=>[t(f,{class:"input-wrap",placeholder:"Last Name",modelValue:s.last_name,"onUpdate:modelValue":e[2]||(e[2]=l=>s.last_name=l)},null,8,["modelValue"])]),_:1}),t(u,{prop:"country",label:"Country/Region"},{default:a(()=>[t(D,{class:"input-wrap",modelValue:s.country,"onUpdate:modelValue":e[3]||(e[3]=l=>s.country=l),"fetch-suggestions":x(i),placeholder:"Country/Region","value-key":"en_name",onSelect:T},null,8,["modelValue","fetch-suggestions"])]),_:1}),t(u,{prop:"division",label:"State/Province/Region"},{default:a(()=>[t(D,{class:"input-wrap",modelValue:s.division,"onUpdate:modelValue":e[4]||(e[4]=l=>s.division=l),"fetch-suggestions":x(L),placeholder:"State/Province/Region","value-key":"en_name",onSelect:R},null,8,["modelValue","fetch-suggestions"])]),_:1}),t(u,{prop:"city",label:"City"},{default:a(()=>[t(f,{class:"input-wrap",placeholder:"City",modelValue:s.city,"onUpdate:modelValue":e[5]||(e[5]=l=>s.city=l)},null,8,["modelValue"])]),_:1}),t(u,{prop:"street",label:"Street Address"},{default:a(()=>[t(f,{class:"input-wrap",placeholder:"Street Address",modelValue:s.street,"onUpdate:modelValue":e[6]||(e[6]=l=>s.street=l)},null,8,["modelValue"])]),_:1}),t(u,{prop:"specific_address",label:"Optional"},{default:a(()=>[t(f,{class:"detail-address",placeholder:"Apartment, suite, unit, building, floor, etc.(optional)",modelValue:s.specific_address,"onUpdate:modelValue":e[7]||(e[7]=l=>s.specific_address=l)},null,8,["modelValue"])]),_:1}),t(u,{prop:"postal",label:"Postal Code"},{default:a(()=>[t(f,{class:"input-wrap",placeholder:"Postal Code",modelValue:s.postal,"onUpdate:modelValue":e[8]||(e[8]=l=>s.postal=l)},null,8,["modelValue"])]),_:1}),t(u,{prop:"tel_phone",label:"Telephone"},{default:a(()=>[t(f,{class:"input-wrap",placeholder:"Telephone",modelValue:s.tel_phone,"onUpdate:modelValue":e[9]||(e[9]=l=>s.tel_phone=l)},null,8,["modelValue"])]),_:1}),t(u,{prop:"duty",label:"VAT/TAX number"},{default:a(()=>[t(f,{class:"input-wrap",placeholder:"VAT/TAX number",modelValue:s.duty,"onUpdate:modelValue":e[10]||(e[10]=l=>s.duty=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}});const U=V=>(Z("data-v-5f0327eb"),V=V(),ee(),V),ne={class:"profile-address-wrap"},ie=U(()=>o("div",{class:"h1"},[g(" Delivery AddressPlease"),o("span",null,"enter your new contact/address")],-1)),re={class:"tip"},ue={class:"addr-wrap"},ce={class:"name"},pe={class:"detail"},me={class:"street"},_e={class:"opr"},fe=["onClick"],ye=["onClick"],ve=U(()=>o("div",{class:"add-icon"},null,-1)),ge=U(()=>o("div",{class:"add-text"},"Add a new address",-1)),he=[ve,ge],Ve=I({__name:"address",setup(V){const C=h(),S=n=>{var r;(r=C.value)==null||r.open(n)},c=async(n,r)=>{r?await z(r,n):await H(n),A()},v=h(),s=h(),A=async()=>{var r,_;const n=await M();n.code===200&&(s.value=n.data,v.value=(_=(r=n.data)==null?void 0:r[0])==null?void 0:_.id)},b=n=>{te.confirm("The address will be deleted. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{(await J(n)).code===200&&(s.value=s.value.filter(_=>_.id!==n),le({type:"success",message:"Delete completed"}))})};return G(()=>{A()}),(n,r)=>{const _=m("el-icon");return q(),k("div",ne,[ie,o("div",re,[t(_,null,{default:a(()=>[t(x(P))]),_:1}),g(` Updating address info here doesn't apply to the already generated orders (including the "Uncompleted Payment" order), please contact your sales rep to update the address info. `)]),o("div",ue,[(q(!0),k(Q,null,Y(s.value,i=>(q(),k("div",{class:se(["addr-container poster",{selected:i.id===v.value}]),key:i.id},[o("div",ce,y(i.first_name)+" "+y(i.last_name),1),o("div",pe,[o("div",me,y(i.street),1),o("div",null,y(i.city)+", "+y(i.postal)+", "+y(i.country)+" ",1),o("div",null,y(i.tel_phone),1)]),o("div",_e,[o("div",{onClick:T=>S(i)},"Edit",8,fe),o("div",{onClick:T=>b(i.id)},"Delete",8,ye)])],2))),128)),o("div",{class:"addr-container add-addr",onClick:S},he)]),t(de,{ref_key:"addressDialogRef",ref:C,onHandleSubmit:c},null,512)])}}});const Se=ae(Ve,[["__scopeId","data-v-5f0327eb"]]);export{Se as default};
