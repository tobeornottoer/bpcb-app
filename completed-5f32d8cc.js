import{d as J,r as b,m as G,Q as H,s as i,c as Q,e as f,f as v,v as e,x as t,g as l,B as m,w as R,y as K,b as a,a0 as Z,F as E,n as ee,ai as le,W as te,aj as T,E as se,i as W,C as L,U as ae,ak as oe,j as ne,p as re,k as ie,t as h,al as de,X as ce,af as ue,_ as _e}from"./index-61481958.js";import{_ as me}from"./pay-0b545f01.js";import{u as pe}from"./useCommon-1972965d.js";import{u as fe}from"./useOrder-b46809f8.js";import"./config-8e92375e.js";const ve=l("div",{class:"leading-[16px] text-[#999] mt-[5px]"}," You can directly send the complaint to BPCB email, We will reply as soon as possible. ",-1),he=l("div",{class:"leading-[16px] text-[#999]"}," Email: fen@bpcb.com , eng@bpcb.com ",-1),be={class:"dialog-footer"},ge=["src"],ye=J({__name:"afterSales",setup(g,{expose:x}){const k=b(),d=G({order_no:"",product_no:"",problem:"",realname:"",email:"",solution:""}),q={problem:[{required:!0,message:"Please enter"}],solution:[{required:!0,message:"Please select"}],realname:[{required:!0,message:"Please enter"}],email:[{required:!0,message:"Please input email address",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}]},y=b(!1),O=(r,s)=>{y.value=!0,ee(()=>{Object.assign(d,{order_no:r,product_no:s})})};H(()=>y.value,r=>{r||(k.value.resetFields(),M())});const Y=async()=>{var p;if(!await((p=k.value)==null?void 0:p.validate().catch(()=>{})))return;const s=JSON.parse(JSON.stringify(d)),_=await le(Object.assign(s,{picture:V.value,attachment:S.value}));_.code===200&&_.message==="success"?te({type:"success",customClass:"success-msgbox",message:T("div",null,[T("h2",null,"Successful after-sales application"),T("div",null,"Your after-sales application will be processed within 1 to 3 hours, and after-sales service before 17:30 will be processed on the same day, except for statutory holidays, Saturdays, and Sundays~")])}).then(P=>{P==="confirm"&&(y.value=!1)}):se({type:"error",message:_.message||"Submit failed, please try again"})},$=b(""),C=b(!1),D=r=>{$.value=r.url,C.value=!0},V=b([]),N=b(),S=b([]),z=b(),F=(r,s)=>{const c=r.response.data.path;s===1&&(V.value=V.value.filter(p=>p!==c)),s===2&&(S.value=S.value.filter(p=>p!==c))},A=async(r,s)=>{var _;if(r.code===200&&r.message==="success"){const c=(_=r.data)==null?void 0:_.path;s===1&&V.value.push(c),s===2&&S.value.push(c)}},M=()=>{V.value=[],S.value=[],N.value.clearFiles(),z.value.clearFiles()};return x({open:O,close}),(r,s)=>{const _=i("el-input"),c=i("el-form-item"),p=i("el-option"),P=i("el-select"),j=i("el-icon"),I=i("el-upload"),w=i("el-button"),o=i("el-form"),u=i("el-scrollbar"),U=i("el-dialog"),X=Q("optimize");return f(),v(E,null,[e(U,{modelValue:y.value,"onUpdate:modelValue":s[5]||(s[5]=n=>y.value=n),title:"After Sales",width:"880px","modal-class":"after-sales-dialog common-dialog",draggable:""},{footer:t(()=>[l("span",be,[e(w,{onClick:s[4]||(s[4]=n=>y.value=!1)},{default:t(()=>[m("Cancel")]),_:1}),R((f(),K(w,{type:"primary"},{default:t(()=>[m("Submit")]),_:1})),[[X,{event:"click",fn:Y,timeout:400}]])])]),default:t(()=>[e(u,{class:"scroll-wrap",height:"500px"},{default:t(()=>[e(o,{ref_key:"formRef",ref:k,model:d,rules:q,size:"large","label-width":"160px"},{default:t(()=>[e(c,{label:"Problem description",prop:"problem"},{default:t(()=>[e(_,{type:"textarea",modelValue:d.problem,"onUpdate:modelValue":s[0]||(s[0]=n=>d.problem=n),placeholder:"Please enter the details of your request.",rows:6,maxlength:500,"show-word-limit":!0},null,8,["modelValue"])]),_:1}),e(c,{label:"Desired treatment",prop:"solution"},{default:t(()=>[e(P,{modelValue:d.solution,"onUpdate:modelValue":s[1]||(s[1]=n=>d.solution=n),class:"w-full"},{default:t(()=>[e(p,{value:"Refund"},{default:t(()=>[m("Refund")]),_:1}),e(p,{value:"Reproduction replacement"},{default:t(()=>[m("Reproduction replacement")]),_:1}),e(p,{value:"Other Ways"},{default:t(()=>[m("Other Ways")]),_:1}),e(p,{value:"Rework by BPCB"},{default:t(()=>[m("Rework by BPCB")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"Upload Picture"},{default:t(()=>[e(I,{ref_key:"fileListRef1",ref:N,action:"/v1/upload",accept:"image/*","list-type":"picture-card","on-preview":D,"on-remove":n=>F(n,1),"on-success":n=>A(n,1),limit:5,multiple:""},{default:t(()=>[e(j,null,{default:t(()=>[e(a(Z))]),_:1})]),_:1},8,["on-remove","on-success"])]),_:1}),e(c,{label:"Upload Attachment"},{default:t(()=>[e(I,{ref_key:"fileListRef2",ref:z,action:"/v1/upload",class:"w-full","on-remove":n=>F(n,2),"on-success":n=>A(n,2),limit:5,multiple:""},{trigger:t(()=>[e(w,{type:"primary",size:"default"},{default:t(()=>[m("select file")]),_:1})]),_:1},8,["on-remove","on-success"])]),_:1}),e(c,{label:"Your name",prop:"realname"},{default:t(()=>[e(_,{modelValue:d.realname,"onUpdate:modelValue":s[2]||(s[2]=n=>d.realname=n),placeholder:"Please enter Your name."},null,8,["modelValue"])]),_:1}),e(c,{label:"Your E-mai",prop:"email"},{default:t(()=>[e(_,{modelValue:d.email,"onUpdate:modelValue":s[3]||(s[3]=n=>d.email=n),placeholder:"Please enter Your E-mai."},null,8,["modelValue"]),ve,he]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:C.value,"onUpdate:modelValue":s[6]||(s[6]=n=>C.value=n)},{default:t(()=>[l("img",{"w-full":"",src:$.value,alt:"Preview Image"},null,8,ge)]),_:1},8,["modelValue"])],64)}}});function we(){const g=b();return{afterSalesRef:g,openAfterSalesDialog:(k,d)=>{g.value.open(k,d)}}}const B=g=>(re("data-v-65b69218"),g=g(),ie(),g),xe={class:"unpayment-module"},ke=B(()=>l("div",{class:"header other"},"Order Completed",-1)),Ce={class:"search-form mt-[20px]"},Ve={class:"order-table"},Se=ne('<div class="order-table-header" data-v-65b69218><div class="min-w-[306px] name-cell" data-v-65b69218>Product Name &amp; Details</div><div class="min-w-[60px]" data-v-65b69218>Consignee</div><div class="min-w-[80px]" data-v-65b69218>Build time</div><div class="min-w-[80px]" data-v-65b69218>Delivery time</div><div class="min-w-[80px]" data-v-65b69218>Take time</div><div class="min-w-[80px]" data-v-65b69218>Operation</div></div>',1),Pe={class:"order-table-body"},Re={class:"container-header"},Oe={class:"ml-[20px]"},De={class:"order-no"},Ue=["onClick"],Be={class:"order-table-item"},$e={class:"min-w-[306px]"},Ne={class:"cell child-cell relative"},Fe={class:"product-detail"},Ae=["onClick"],Ie=B(()=>l("span",{class:"text"},"Product No.: ",-1)),Le={key:0},Ee=B(()=>l("span",{class:"text"},"Solder mask: ",-1)),qe={key:1},Ye=B(()=>l("span",{class:"text"},"Silkscreen: ",-1)),ze={class:"order-type"},je=["onClick"],Te={class:"price-wrap"},We={class:"min-w-[60px] cell"},Me={class:"min-w-[80px] cell"},Je={class:"min-w-[80px] cell"},Qe={class:"min-w-[80px] cell"},Xe={class:"min-w-[80px] cell after-btn-wrap"},Ge=["onClick"],He=B(()=>l("div",null,"Online Chat",-1)),Ke=["src"],Ze=J({__name:"completed",setup(g){const{time:x,orderDetailRef:k,handleViewOrderdetail:d,handleProductImg:q,iframeUrl:y,chatVisible:O,closeChat:Y,handleToChat:$}=pe(),{list:C,form:D,formRef:V,handleSearch:N,handleReset:S,getList:z}=fe({type:b("completed")}),{afterSalesRef:F,openAfterSalesDialog:A}=we();return(M,r)=>{const s=i("el-input"),_=i("el-form-item"),c=i("el-button"),p=i("el-form"),P=i("el-icon"),j=i("el-empty"),I=i("el-drawer"),w=Q("time-format");return f(),v("div",xe,[ke,l("div",Ce,[e(p,{ref_key:"formRef",ref:V,model:a(D),"label-width":"170px",inline:!0},{default:t(()=>[e(_,{prop:"search",label:"Order ID/Product No.:"},{default:t(()=>[e(s,{type:"text",modelValue:a(D).search,"onUpdate:modelValue":r[0]||(r[0]=o=>a(D).search=o),modelModifiers:{tirm:!0}},null,8,["modelValue"])]),_:1}),e(_,null,{default:t(()=>[e(c,{class:"ml-[10px]",onClick:a(S)},{default:t(()=>[m("reset")]),_:1},8,["onClick"]),e(c,{type:"primary",class:"ml-[10px]",onClick:a(N)},{default:t(()=>[m("search")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),l("div",Ve,[Se,l("div",Pe,[a(C).length?(f(!0),v(E,{key:0},W(a(C),o=>(f(),v("div",{class:"order-table-container",key:o.id},[l("div",Re,[R(l("span",null,null,512),[[w,o.create_time,a(x)]]),l("span",Oe,[m("Order noï¼š"),l("span",De,h(o.order_no),1)]),o.feedback_url?(f(),v("span",{key:0,class:"ml-[20px] service",onClick:u=>a($)(o)},[m("customer service"),e(P,null,{default:t(()=>[e(a(de))]),_:1})],8,Ue)):L("",!0)]),l("div",Be,[l("div",$e,[(f(!0),v(E,null,W(o.products,u=>(f(),v("div",Ne,[l("div",{class:ce([a(q)(u),"product-img"])},null,2),l("div",Fe,[l("div",{class:"title",onClick:U=>a(d)(u.id)},h(u.title),9,Ae),l("div",null,[Ie,m(h(u.product_no),1)]),u.radSolderColor?(f(),v("div",Le,[Ee,m(h(u.radSolderColor),1)])):L("",!0),u.radFontColor?(f(),v("div",qe,[Ye,m(h(u.radFontColor),1)])):L("",!0),l("div",ze,"["+h(u.order_type)+"]",1),l("div",{class:"detail-view cursor-pointer",onClick:U=>a(d)(u.id)}," Detail View ",8,je),l("div",Te,[l("div",null,"Price: $ "+h(o.price),1),l("div",null,"Freight: $ "+h(o.freight),1)])])]))),256))]),l("div",We,[l("div",null,h(o.consignee),1),l("div",null,h(o.address),1)]),R(l("div",Me,null,512),[[w,o.making_time,a(x)]]),R(l("div",Je,null,512),[[w,o.delivery_time,a(x)]]),R(l("div",Qe,null,512),[[w,o.take_time,a(x)]]),l("div",Xe,[(f(!0),v(E,null,W(o.products,u=>(f(),v("div",null,[l("span",{class:"underline text-[#ff9917] cursor-pointer",onClick:U=>a(A)(o.order_no,u.product_no)},"After Sales",8,Ge)]))),256))])])]))),128)):L("",!0),R(e(j,null,null,512),[[ae,!a(C).length]])])]),e(I,{class:"chat-drawer",modelValue:a(O),"onUpdate:modelValue":r[1]||(r[1]=o=>oe(O)?O.value=o:null),"show-close":!1},{header:t(()=>[He,e(P,{onClick:a(Y)},{default:t(()=>[e(a(ue))]),_:1},8,["onClick"])]),default:t(()=>[l("iframe",{src:a(y),frameborder:"0"},null,8,Ke)]),_:1},8,["modelValue"]),e(me,{ref_key:"orderDetailRef",ref:k},null,512),e(ye,{ref_key:"afterSalesRef",ref:F},null,512)])}}});const ol=_e(Ze,[["__scopeId","data-v-65b69218"]]);export{ol as default};
