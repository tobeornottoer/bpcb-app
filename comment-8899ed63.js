import{b as J}from"./config-8e92375e.js";import{d as $,l as H,r as h,m as O,q as T,s as l,c as Y,e as c,f as i,g as t,v as a,x as n,w as j,y as K,E as C,z as Q,p as W,k as X,b as I,A as Z,B as x,C as S,F as z,i as F,t as w,D as ee,_ as te}from"./index-61481958.js";import{g as oe,p as se}from"./remark-c61a0419.js";const d=u=>(W("data-v-d60cc82e"),u=u(),X(),u),ae={class:"about-common-module"},ne={class:"common-module comment-content"},le=d(()=>t("div",{class:"text-[16px] font-bold mb-[15px]"}," Do you have any questions? welcome to consult, we will provide you with professional opinions or suggestions. ",-1)),ce=d(()=>t("div",null,"leave a message",-1)),ie=d(()=>t("div",null,"If you have any questions, please let us explore together.",-1)),re={key:0,class:"login"},de={class:"text-[24px] text-yellow-600 h-[24px] leading-[24px] mr-[5px]"},ue=d(()=>t("span",{class:"el-upload__tip"}," Upload a photo: You can only upload 1 files in total. Each file cannot exceed 2MB, Supports JPG, JPEG, GIF PNG, BMP ",-1)),pe={class:"mt-[40px]"},me=d(()=>t("h1",{class:"mt-[20px] mb-[10px]"},"Message board",-1)),_e={class:"px-[10px]"},fe={class:"ml-[5px] text-[14px] text-[#999]"},ve={class:"mx-[15px] my-[15px] px-[10px] py-[10px] bg-[#fafafa]"},he={key:0},xe=["src"],ge=$({__name:"comment",setup(u){const k=H(()=>{var e;return!!((e=ee())!=null&&e.username)}),g=h(),p=O({content:""}),L={content:[{required:!0,message:"Please enter"}]},m=h(),_=h([]),M=e=>{},U=e=>e.size/1024/1024>2?(C.error("Picture size can not exceed 2MB!"),!1):!0,V=e=>{m.value.clearFiles();const o=e[0];o.uid=Q(),m.value.handleStart(o)},E=(e,o)=>{e.code===200&&e.message==="success"&&(_.value=[{name:o.name,url:e.data.path}])},q=async()=>{var v;if(!await((v=g.value)==null?void 0:v.validate().catch(()=>{})))return;const{content:o}=p,y=_.value.map(b=>b.url),f=await se({content:o,attachment:y}),r=f.code===200&&f.message==="success";C({type:r?"success":"error",message:`Message ${r?"successful":"failed"} `}),r&&(g.value.resetFields(),m.value.clearFiles(),B())},R=h([]);T(async()=>{B()});const B=async()=>{const e=await oe();R.value=e.code===200?e.data||[]:[]};return(e,o)=>{const y=l("el-input"),f=l("el-icon"),r=l("router-link"),v=l("el-form-item"),b=l("el-form"),P=l("el-button"),D=l("el-upload"),N=l("el-scrollbar"),G=Y("optimize");return c(),i("div",ae,[t("div",ne,[le,ce,ie,a(b,{ref_key:"formRef",ref:g,model:p,rules:L,size:"large",class:"mt-[20px]"},{default:n(()=>[a(v,{prop:"content"},{default:n(()=>[a(y,{type:"textarea",modelValue:p.content,"onUpdate:modelValue":o[0]||(o[0]=s=>p.content=s),placeholder:"Please enter the details of your request.",rows:8,maxlength:1e3,"show-word-limit":!0},null,8,["modelValue"]),k.value?S("",!0):(c(),i("div",re,[t("span",de,[a(f,null,{default:n(()=>[a(I(Z))]),_:1})]),a(r,{to:`/sign?p=${encodeURIComponent("/about/comment")}`,tag:"span",class:"!underline"},{default:n(()=>[x("Log in to post comments")]),_:1},8,["to"])]))]),_:1})]),_:1},8,["model"]),a(D,{ref_key:"uploadRef",ref:m,"file-list":_.value,"onUpdate:fileList":o[1]||(o[1]=s=>_.value=s),class:"upload-demo",action:"/v1/upload",accept:"image/*",multiple:"","on-remove":M,limit:1,"on-exceed":V,"on-success":E,"before-upload":U},{tip:n(()=>[ue]),default:n(()=>[a(P,{type:"primary",size:"small"},{default:n(()=>[x("Click to upload")]),_:1})]),_:1},8,["file-list"]),t("div",pe,[j((c(),K(P,{disabled:!k.value,type:"primary"},{default:n(()=>[x("Post Comment")]),_:1},8,["disabled"])),[[G,{event:"click",fn:q,timeout:400}]])]),me,a(N,{height:"400px",always:""},{default:n(()=>[t("div",null,[(c(!0),i(z,null,F(R.value,s=>(c(),i("div",{key:s.id,class:"remark-item"},[t("div",_e,[x(w(s.identity)+" ",1),t("span",fe,w(s.create_time),1)]),t("div",ve,[t("div",null,w(s.content),1),s.attachment?(c(),i("div",he,[(c(!0),i(z,null,F(s.attachment,A=>(c(),i("img",{class:"h-[100px]",src:I(J)+A},null,8,xe))),256))])):S("",!0)])]))),128))])]),_:1})])])}}});const ke=te(ge,[["__scopeId","data-v-d60cc82e"]]);export{ke as default};
