import{d as le,s as ne,r as p,L as ce,j as m,c as M,e as c,f as d,g as e,k as l,p as n,F as w,z as P,C as A,w as x,y as de,h as ie,R as re,S as _e,b as h,l as i,A as r,B as ue,m as N,N as j,H as g,Q as pe,_ as me}from"./index-02b6e309.js";import{d as ve,f as fe,b as he}from"./index-ced1bd49.js";import{d as ye,u as ke,e as we,p as xe,f as ge}from"./awaitPayment-ff5f9902.js";import{_ as be}from"./detail.vue_vue_type_style_index_0_lang-81632bc7.js";import"./address-ceff7901.js";import"./config-bbba5d5f.js";const y=b=>(re("data-v-5ac20794"),b=b(),_e(),b),Ce={class:"unpayment-module"},Se=y(()=>e("div",{class:"header"},"Uncompleted Payment",-1)),Ve={class:"search-form mt-[20px]"},Oe={class:"order-table"},Ne=ie('<div class="order-table-header" data-v-5ac20794><div class="min-w-[346px] name-cell" data-v-5ac20794>Product Name &amp; Details</div><div class="min-w-[126px]" data-v-5ac20794>consignee</div><div class="min-w-[40px]" data-v-5ac20794>Price</div><div class="min-w-[40px]" data-v-5ac20794>Freight</div><div class="min-w-[140px]" data-v-5ac20794>Operation</div></div>',1),$e={class:"order-table-body"},De={class:"container-header"},Ue={class:"ml-[20px]"},Pe={class:"order-no"},Ae=["onClick"],Ie={class:"order-table-item"},Le={class:"min-w-[346px]"},Be={class:"cell child-cell"},Ee={class:"product-detail"},Fe=["onClick"],Re=y(()=>e("span",{class:"text"},"Product No.: ",-1)),Me={key:0},je=y(()=>e("span",{class:"text"},"Solder mask: ",-1)),ze={key:1},He=y(()=>e("span",{class:"text"},"Silkscreen: ",-1)),Ye={class:"order-type"},Te=["onClick"],Je={class:"min-w-[126px] cell edit"},qe={class:"min-w-[40px] cell"},Qe={class:"min-w-[40px] cell"},Ge={class:"min-w-[140px] cell"},Ke=y(()=>e("div",{class:"paypal-icon"},null,-1)),We=y(()=>e("div",null,"Online Chat",-1)),Xe=["src"],Ze="YYYY-MM-DD HH:mm:ss",es=le({__name:"unpayment",setup(b){const C=ne({search:""}),I=p(),z=j(async()=>{const s=JSON.parse(JSON.stringify(C));await S(s)}),H=j(async()=>{var s;(s=I.value)==null||s.resetFields(),await S()}),f=p([]);ce(()=>{S()});const S=async s=>{var _;const a=await ye(s);a.code===200&&(f.value=((_=a.data)==null?void 0:_.list)||[])},L=p(),V=p(!1),Y=()=>{V.value=!1},T=s=>{s.feedback_url&&(L.value=s.feedback_url,V.value=!0)},J=s=>s.type==="fpc_pcb"?s.pcb_type==="Rigid-Flex Board"?"rigid_img":"flexible_img":s.type+"_img",B=p(),E=s=>{var a;(a=B.value)==null||a.open(s)},$=p(),k=p(),O=p(),F=p(),q=async s=>{O.value=s;const a=await ke().getAddressList();F.value=h(a),$.value="address"},R=()=>{O.value=void 0,$.value=void 0,k.value=void 0},Q=()=>{R()},G=async()=>{if(!k.value){g.error("Please select a address");return}const s=await ge(O.value.order_no,{address_id:k.value});s.code===200&&s.message==="success"?(await S(),g.success("Update Successful")):g.success("Update failed"),R()},K=async s=>{const{order_no:a}=s,_=await we(a);_.code===200&&_.message==="success"?(f.value=f.value.filter(v=>v.order_no!==a),g.success("Update Successful")):g.success("Update failed")},W=async s=>{var u;const a=pe.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),{order_no:_}=s,v=await xe(_);v.code===200&&v.message==="success"&&(a.close(),window.location.href=(u=v.data)==null?void 0:u.url)};return(s,a)=>{const _=m("el-input"),v=m("el-form-item"),u=m("el-button"),X=m("el-form"),D=m("el-icon"),Z=m("el-option"),ee=m("el-select"),se=m("el-empty"),te=m("el-drawer"),ae=M("time-format"),U=M("optimize");return c(),d("div",Ce,[Se,e("div",Ve,[l(X,{ref_key:"formRef",ref:I,model:C,"label-width":"170px",inline:!0},{default:n(()=>[l(v,{prop:"search",label:"Order ID/Product No.:"},{default:n(()=>[l(_,{type:"text",modelValue:C.search,"onUpdate:modelValue":a[0]||(a[0]=o=>C.search=o),modelModifiers:{tirm:!0}},null,8,["modelValue"])]),_:1}),l(v,null,{default:n(()=>[l(u,{class:"ml-[10px]",onClick:h(H)},{default:n(()=>[i("reset")]),_:1},8,["onClick"]),l(u,{type:"primary",class:"ml-[10px]",onClick:h(z)},{default:n(()=>[i("search")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),e("div",Oe,[Ne,e("div",$e,[f.value.length?(c(!0),d(w,{key:0},P(f.value,o=>(c(),d("div",{class:"order-table-container",key:o.id},[e("div",De,[x(e("span",null,null,512),[[ae,o.create_time,Ze]]),e("span",Ue,[i("Order noï¼š"),e("span",Pe,r(o.order_no),1)]),e("span",{class:"ml-[20px] service",onClick:t=>T(o)},[i("customer service"),l(D,null,{default:n(()=>[l(h(ve))]),_:1})],8,Ae)]),e("div",Ie,[e("div",Le,[(c(!0),d(w,null,P(o.products,t=>(c(),d("div",Be,[e("div",{class:ue([J(t),"product-img"])},null,2),e("div",Ee,[e("div",{class:"title",onClick:oe=>E(t.id)},r(t.title),9,Fe),e("div",null,[Re,i(r(t.product_no),1)]),t.radSolderColor?(c(),d("div",Me,[je,i(r(t.radSolderColor),1)])):A("",!0),t.radFontColor?(c(),d("div",ze,[He,i(r(t.radFontColor),1)])):A("",!0),e("div",Ye,"["+r(t.order_type)+"]",1),e("div",{class:"detail-view cursor-pointer",onClick:oe=>E(t.id)}," Detail View ",8,Te)])]))),256))]),e("div",Je,[$.value=="address"&&O.value.order_no==o.order_no?(c(),d(w,{key:0},[l(ee,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=t=>k.value=t),placeholder:"Please select address",class:"mb-[8px]"},{default:n(()=>[(c(!0),d(w,null,P(F.value,t=>(c(),N(Z,{value:t.id,key:t.id,label:`${t.street}, ${t.city}, ${t.country}(${t.postal})`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),l(u,{link:"",onClick:Q},{default:n(()=>[i("cancel")]),_:1}),x((c(),N(u,{type:"primary",link:""},{default:n(()=>[i("confirm")]),_:1})),[[U,{event:"click",fn:G,timeout:400}]])],64)):(c(),d(w,{key:1},[e("div",null,r(o.consignee),1),e("div",null,r(o.address),1),l(D,{class:"edit-icon",onClick:t=>q(o)},{default:n(()=>[l(h(fe))]),_:2},1032,["onClick"])],64))]),e("div",qe,"$ "+r(o.price),1),e("div",Qe,"$ "+r(o.freight),1),e("div",Ge,[x((c(),N(u,{class:"paypal-btn !block",type:"danger",plain:""},{default:n(()=>[Ke]),_:2},1024)),[[U,{event:"click",fn:W,timeout:400,params:{order_no:o.order_no}}]]),x((c(),N(u,{link:"",class:"ml-0 mt-[10px] !block"},{default:n(()=>[i("cancellation of order")]),_:2},1024)),[[U,{event:"click",fn:K,timeout:400,params:{order_no:o.order_no}}]])])])]))),128)):A("",!0),x(l(se,null,null,512),[[de,!f.value.length]])])]),l(te,{class:"chat-drawer",modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=o=>V.value=o),"show-close":!1},{header:n(()=>[We,l(D,{onClick:Y},{default:n(()=>[l(h(he))]),_:1})]),default:n(()=>[e("iframe",{src:L.value,frameborder:"0"},null,8,Xe)]),_:1},8,["modelValue"]),l(be,{ref_key:"orderDetailRef",ref:B},null,512)])}}});const cs=me(es,[["__scopeId","data-v-5ac20794"]]);export{cs as default};
