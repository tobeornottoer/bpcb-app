import{r,m as v,q as w,av as O,aw as h,ax as x,ay as b,az as g,a8 as u,W as A,aA as k,E as d,b as j}from"./index-61481958.js";import{b as B}from"./pay-0b545f01.js";function T(f){const n=r(""),o=v({search:""}),i=r(),y=u(async()=>{const e=JSON.parse(JSON.stringify(o));await t(e)}),m=u(async()=>{var e;(e=i.value)==null||e.resetFields(),await t()}),s=r([]);w(()=>{t()});const t=async e=>{var l;const c=n.value;let a;switch(c){case"unpayment":a=await B(e);break;case"production":a=await b(e);break;case"delivery":a=await x(e);break;case"completed":a=await h(e);break;case"all":a=await O(e);break}(a==null?void 0:a.code)===200&&(s.value=((l=a.data)==null?void 0:l.list)||[])},p=async({orderNo:e})=>{A.confirm("Are you sure you have received it? ","Tip",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(async()=>{const c=await k(e);c.code===200&&c.message==="success"?(s.value=s.value.filter(a=>a.order_no!==e),d.success("Update Successful")):d.success("Update failed")})};return g(()=>{const{type:e}=f;n.value=j(e)}),{list:s,form:o,formRef:i,handleSearch:y,handleReset:m,getList:t,handleCompleteOrder:p}}export{T as u};
